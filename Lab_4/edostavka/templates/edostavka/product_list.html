{% extends "base.html" %}
{% load static %}

{% block title %}
    Products
{% endblock %}

{% block content %}

  <link rel="stylesheet" type="text/css" href="{% static 'edostavka/css/products.css'%}?v=2"/>

  <h1>Products</h1>

    <form method="get">
      <label for="filter_type">Filter by:</label>
      <select name="filter_type" id="filter_type">
        <option value="">None</option>
        <option value="name">Name</option>
        <option value="price">Price</option>
      </select>
      <label for="sort_order">Sort order:</label>
      <select name="sort_order" id="sort_order">
        <option value="ascending">Ascending</option>
        <option value="descending">Descending</option>
      </select>
      <button type="submit">Filter</button>
    </form>

  <div class="product-list">
    {% if product_list %}
      {% for product in product_list %}
        <div class="card">
          <img src="{% static 'edostavka/images/mac-by-5f5.png' %}" alt="mac" style="width:100%">
          <h1>{{ product.title }}</h1>
          <p class="price">${{product.price}}</p>
          <p><button class="buy-button" data-url="{{ product.get_absolute_url }}">Add to Cart</button></p>
        </div>


        <script>
          document.addEventListener("click", function (event) {
            if (event.target.classList.contains("buy-button")) {
                window.location.href = event.target.getAttribute("data-url");
            }
          });
        </script>
{#        <a href="{{ product.get_absolute_url }}">{{ product.title }}</a>#}
{#        ({{product.price}})#}

      {% endfor %}
    {% else %}
      <p>There are no products in the store.</p>
    {% endif %}
  </div>

{% endblock %}


